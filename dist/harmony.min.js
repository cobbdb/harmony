!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.Harmony=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){(function(a){b.exports=function(b){var c,d={},e={},f=[],g=a.localStorage||{};return c=function(a,c){var h,i,a,j,k="string"==typeof a,l=typeof c,m="undefined"!==l&&"function"!==l;if("on"===g.lumberjack||b){if(!k||!m)throw Error("Lumberjack Error: log(channel, data) requires an channel {String} and a payload {String|Object|Number|Boolean}.");for(j={time:new Date,data:c,channel:a,id:f.length},d[a]=d[a]||[],d[a].push(j),f.push(j),e[a]=e[a]||[],i=e[a].length,h=0;i>h;h+=1)e[a][h](c)}},c.clear=function(a){a?d[a]=[]:(d={},f=[])},c.readback=function(a,b){var c="string"==typeof a;if(c)return b?JSON.stringify(d[a],null,4):d[a]||[];throw Error("log.readback(channel, pretty) requires an channel {String}.")},c.readback.master=function(a){return a?JSON.stringify(f,null,4):f},c.readback.channels=function(a){var b=Object.keys(d);return a?JSON.stringify(b):b},c.on=function(a,b){var c="string"==typeof a,d="function"==typeof b;if(!c||!d)throw Error("log.on(channel, cb) requires an channel {String} and a callback {Function}.");e[a]=e[a]||[],e[a].push(b)},c.off=function(a){var b="string"==typeof a;if(!b)throw Error("log.off(channel) requires an channel {String}.");e[a]=[]},c.enable=function(){b=!0},c.disable=function(){b=!1},c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b){(function(c){var d=a("./log.js");b.exports=function(a,b){var e,f,g={slotRenderEnded:[]},h=(new Date).getTime(),i=b.mapping||[],j=b.companion||!1,k=(b.interstitial||!1,b.targeting||{});if(d("init",{msg:"Creating new ad slot.",conf:b}),!c.document.getElementById(b.id))throw Error("Ad slot container was not found in the DOM.");e=b.interstitial?c.googletag.defineOutOfPageSlot(b.adunit,b.id):c.googletag.defineSlot(b.adunit,b.sizes,b.id),e.divId=b.id,e.name=b.name,e.breakpoint=b.breakpoint,e.sizes=b.sizes,e.adunit=b.adunit;for(f in k)e.setTargeting(f,k[f]);return e.defineSizeMapping(i),"function"==typeof b.callback&&(g.slotRenderEnded.push(b.callback),d("init","Attached provided callback for "+b.name)),e.on=function(a,b){g[a]=g[a]||[],g[a].push(b),d("init","Attached new callback for "+a)},a.addEventListener("slotRenderEnded",function(a){var c,f,i;if(a.slot===e)for(d("event","slotRenderEnded for "+b.name),i=(new Date).getTime(),d("metric",{event:"Total load time",slot:b.name,value:i-h}),f=g.slotRenderEnded.length,c=0;f>c;c+=1)g.slotRenderEnded[c](a)}),j&&e.addService(c.googletag.companionAds()),e.addService(a),e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./log.js":5}],3:[function(a,b){var c=(a("./util.js"),{});b.exports={get:function(a){return c[a]||[]},add:function(a,b){return c[a]=c[a]||[],c[a].push(b),c[a]},clear:function(){c={}}}},{"./util.js":7}],4:[function(a,b){(function(c){var d=a("./util.js"),e=a("./adslot.js"),f=a("./log.js"),g=a("./slotset.js"),h=a("./bpset.js");b.exports=function(a){return a=a||{},a.forceLog&&f.enable(),f("init","Harmony defined."),{load:function(a){var b=c.googletag.pubads();a=a||{},a.slots=a.slots||[];var i,j,k,l=a.slots.length;for(f("load","Generating ad slots."),i=0;l>i;i+=1){k=a.slots[i];try{j=e(b,d.scrubConf(k)),g.add(j),h.add(j.breakpoint,j)}catch(m){f("error",{msg:"Slot failed to load during call to load().",conf:k,err:m})}}var n,o,p=a.targeting||{};f("load","Applying pubads targeting.");for(n in p)o=p[n],f("load","- "+n+" = "+o),b.setTargeting(n,o);f("load","Harmony config loaded.")},log:f,slot:g.get,hasSlot:g.has,breakpoint:h.get,defineSlot:function(a){var b;try{b=e(c.googletag.pubads(),d.scrubConf(a)),g.add(b),h.add(a.breakpoint,b)}catch(i){f("error",{msg:"Slot failed to load during call to defineSlot()",conf:a,err:i})}},show:{breakpoint:function(a){var b,d,e,g=h.get(a),i=g.length;f("show",{msg:"Showing ads at breakpoint",breakpoint:a});try{for(b=0;i>b;b+=1)d=g[b],c.googletag.display(d.divId),e=document.getElementById(d.divId),e?e.style.display="block":f("error",{msg:"Failed to show slot for breakpoint",breakpoint:a,reason:"Slot was missing from the DOM",slot:d})}catch(j){f("error",{msg:"Failed to show breakpoint",breakpoint:a,err:j})}},slot:function(a){var b,d;f("show",{msg:"Showing slot",name:a});try{b=g.get(a),c.googletag.display(b.divId),d=document.getElementById(b.divId),d.style.display="block"}catch(e){f("error",{msg:"Failed to show slot",name:a,err:e})}}},hide:{breakpoint:function(a){var b,c,d=h.get(a),e=d.length;for(f("hide","Hiding ads at breakpoint "+a),b=0;e>b;b+=1)c=document.getElementById(d[b].divId),c?c.style.display="none":f("error",{msg:"Failed to hide slot for breakpoint",breakpoint:a,reason:"Slot was missing from the DOM",id:d[b].divId})},slot:function(a){var b,c=g.get(a);f("hide",{msg:"Hiding slot",name:a});try{b=document.getElementById(c.divId),b.style.display="none"}catch(d){f("error",{msg:"Failed to hide slot",name:a,err:d})}}}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./adslot.js":2,"./bpset.js":3,"./log.js":5,"./slotset.js":6,"./util.js":7}],5:[function(a,b){var Lumberjack=a("lumberjackjs");b.exports=Lumberjack()},{lumberjackjs:1}],6:[function(a,b){var c=a("./util.js"),d={};b.exports={get:function(a){return d[a]||{on:c.noop,setTargeting:c.noop,mock:!0}},add:function(a){d[a.name]=a},has:function(a){return a in d},clear:function(){d={}}}},{"./util.js":7}],7:[function(a,b){var c=a("./slotset.js");b.exports={noop:function(){},slotCount:0,scrubConf:function(a){var b,d,e={el:{}};if(c.has(a.name)){do if(d=document.getElementById(a.id)){if(!d.innerHTML)return this.slotCount+=1,b="-h"+this.slotCount,d.id+=b,e.el.id=e.id,a.id=d.id,a.name+=b,a;e.el=d,e.id=d.id,d.id="h-temp"}while(d);throw Error("Ad slot container was not found in the DOM.")}return a}}},{"./slotset.js":6}]},{},[4])(4)});